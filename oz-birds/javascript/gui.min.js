/* GUI blend http://gel.westpacgroup.com.au/GUI/WBC/blender/#/_colors:2.0.1/_fonts:2.0.1/_grid:2.0.0/_javascript-helpers:2.0.0/_text-styling:3.0.0/modals:2.0.2/tabcordions:3.0.0 */
"use strict";!function(e,t){function n(e){if(9===e.keyCode){var t=!!e.shiftKey;r(this,e.target,t)&&(e.preventDefault(),e.stopPropagation())}}function r(e,t,n){var r,o,i,a,c=l(e),u=t;do{switch(r=c.index(u),o=r+1,i=r-1,a=c.length-1,r){case-1:return!1;case 0:i=a;break;case a:o=0}n&&(o=i),u=c.get(o);try{u.focus()}catch(e){}}while(t===t.ownerDocument.activeElement);return!0}function o(){return this.tabIndex>0}function i(){return!this.tabIndex}function a(e,t){return e.t-t.t||e.i-t.i}function l(t){var n=e(t),r=[],l=0;return f.enable&&f.enable(),n.find("a[href], link[href], [draggable=true], [contenteditable=true], :input:enabled, [tabindex=0]").filter(":visible").filter(i).each(function(e,t){r.push({v:t,t:0,i:l++})}),n.find("[tabindex]").filter(":visible").filter(o).each(function(e,t){r.push({v:t,t:t.tabIndex,i:l++})}),f.disable&&f.disable(),r=e.map(r.sort(a),function(e){return e.v}),e(r)}function c(){return this.keydown(n),this.data(s,!0),this}function u(){return this.unbind("keydown",n),this.removeData(s),this}function d(){return!!this.data(s)}var s="trap.isTrapping";e.fn.extend({trap:c,untrap:u,isTrapping:d});var f={};e.find.find&&e.find.attr!==e.attr&&function(){function n(e){var n=e.getAttributeNode(i);return n&&n.specified?parseInt(n.value,10):t}function r(){a[i]=a.tabIndex=n}function o(){delete a[i],delete a.tabIndex}var i="tabindex",a=e.expr.attrHandle;f={enable:r,disable:o}}()}(jQuery);var GUI=function(){return{DEBUG:!1,DEBUGfilter:[],init:function(){window.console||(console={log:function(){}}),GUI.DEBUG&&console.log("%cGUI DEBUGGING INFORMATION","font-size: 25px;"),$("html").removeClass("no-js").addClass("js"),$("body").on("keydown",function(e){var t=e.keyCode||e.which;9==t&&(GUI.debugging("GUI: Tab detected","report"),$("html").addClass("is-keyboarduser"),$("body").off("keydown"))})},detectCSS:function(e){GUI.debugging('Core: detectCSS called with "'+e+'"',"report");var t=!1,n=["Webkit","Moz","ms","O"];e=e.toLowerCase();var r=e.charAt(0).toUpperCase()+e.substr(1),o=document.createElement("div");if(void 0!=o.style[e])t=!0;else for(var i=0;i<n.length;i++)void 0!=o.style[n[i]+r]&&(t=!0);return t?$("html").addClass(e):$("html").addClass("no-"+e),t},debounce:function(e,t,n){GUI.debugging("Core: Debounce called","report");var r;return function(){var o=this,i=arguments,a=function(){r=null,n||(GUI.debugging("Core: Debounce executed (1)","report"),e.apply(o,i))},l=n&&!r;clearTimeout(r),r=setTimeout(a,t),l&&(GUI.debugging("Core: Debounce executed (2)","report"),e.apply(o,i))}},throttle:function(e,t){GUI.debugging("Core: Throttle called","report"),t||(t=250);var n,r;return function(){var o=this,i=+new Date,a=arguments;n&&i<n+t?(clearTimeout(r),r=setTimeout(function(){GUI.debugging("Core: Throttle executed (1)","report"),n=i,e.apply(o,a)},t)):(GUI.debugging("Core: Throttle executed (2)","report"),n=i,e.apply(o,a))}},debugging:function(e,t){if(GUI.DEBUGfilter.length>0){for(var n=e.split(": "),r="",o=GUI.DEBUGfilter.length-1;o>=0;o--)n[0]===GUI.DEBUGfilter[o]&&(r=e);e=r}GUI.DEBUG&&e.length>0&&("report"===t?console.log("%c☑ ","color: green; font-size: 18px;",e):"error"===t?console.log("%c☒ ","color: red; font-size: 18px;",e):"interaction"===t?console.log("%c☜ ","color: blue; font-size: 18px;",e):"send"===t?console.log("%c↝ ","color: pink; font-size: 18px;",e):"receive"===t&&console.log("%c↜ ","color: pink; font-size: 18px;",e))}}}();GUI.init();!function(e){var o={};o.lastFocus={},o.toggelModal=function(o,l,a){e.debugging("modals: "+(o?"Closing":"Opening")+" modal","report"),o?(l.removeClass("is-open").attr("aria-hidden","true").untrap(),$(".modal-backdrop").fadeTo(200,0,function(){$(".modal-backdrop").remove()}),e.modals.lastFocus.focus()):(e.modals.lastFocus=$(":focus"),l.addClass("is-open").attr("aria-hidden","false").focus().trap(),$("<div/>").addClass("modal-backdrop").on("click",function(){e.debugging("modals: Backdrop clicked","interaction"),e.modals.toggelModal(!0,$(".modal"),"")}).css("opacity",0).insertAfter(l).fadeTo(250,1))},o.init=function(){e.debugging("modals: Initiating","report"),$(".js-modal").length&&(e.debugging("modals: Found instances","report"),e.modals.render())},o.render=function(){e.debugging("modals: Rendering","report"),$(".js-modal").not(".js-rendered").on("click",function(){e.debugging("modals: Open button clicked","interaction");var o=$(this),l=o.attr("data-modal"),a=$(l),n=a.hasClass("is-open");e.modals.toggelModal(n,a,l)}).addClass("js-rendered"),$(".js-modalbody").not(".js-rendered").keyup(function(o){if(27==o.keyCode){e.debugging("modals: Esc button clicked","interaction");var l=$(".modal");e.modals.toggelModal(!0,l,"")}}).addClass("js-rendered"),$(".js-modalclose").not(".js-rendered").on("click",function(){e.debugging("modals: Close button clicked","interaction");var o=$(".modal");e.modals.toggelModal(!0,o,"")}).addClass("js-rendered")},e.modals=o,e.modals.init()}(GUI),function(e){var o={},l={};l.toggle=function(o,l,a){if(e.debugging("collapsible: Toggle called","report"),o instanceof jQuery)var n=o;else var n=$(o);jQuery.fn.reverse=[].reverse,n.reverse().each(function(){var o=$(this),n=o.hasClass("is-open");n?e.collapsible.close(o,l,a):e.collapsible.open(o,l,a)})},l.close=function(o,l,a){if(e.debugging('collapsible: Closing element "'+o+'"',"report"),o instanceof jQuery)var n=o;else var n=$(o);if(!n.length)return void e.debugging("collapsible: No element found to close","error");var i=n.height();n.css({height:i}).removeClass("is-open").attr("aria-hidden","true"),l?n.stop(!0).animate({height:0},400,a):(n.css({height:0}),"undefined"!=typeof a&&null!==a&&a())},l.open=function(o,l,a,n){if(e.debugging('collapsible: Opening element "'+o+'"',"report"),void 0===n&&(n=!0),o instanceof jQuery)var i=o;else var i=$(o);if(!i.length)return void e.debugging("collapsible: No element found to open","error");if(l){var t=i.css("height"),s=i.css({height:"auto"}).height();i.css({height:t})}i.addClass("is-open").attr("aria-hidden","false"),n&&i.first().focus(),l?i.stop(!0).animate({height:s},400,function(){i.css({height:""}),"undefined"!=typeof a&&null!==a&&a()}):(i.css({height:""}),"undefined"!=typeof a&&null!==a&&a())},o.init=function(){e.debugging("tabcordion: Initiating","report"),$(".js-collapsible").length&&(e.debugging("tabcordion: Found instance","report"),e.tabcordion.render())},o.render=function(){e.debugging("tabcordion: Rendering","report"),$(".js-collapsible").not(".js-rendered").on("click",function(o){e.debugging("collapsible: Collapsible clicked","interaction"),o.preventDefault();var l=$(this),a=l.attr("href")?l.attr("href"):l.attr("data-collapsible"),n=l.parents(".tabcordion"),i="undefined"!==n.attr("data-tabcordion-scroll")&&"none"!==n.attr("data-tabcordion-scroll");if(n.length){e.debugging("collapsible: Found to be inside tabcordion","report");var t=l.parents(".tabcordion").find(".collapsible-body"),s=1===parseInt($("html").css("line-height")),r=!0;if(s||(r=!1,l.parents(".tabcordion-accordion").length&&(r=!0)),l.parents(".tabcordion-tabs").length&&(r=!1),r)if(e.collapsible.close(t.filter(".is-open"),!0),i){e.debugging("collapsible: Open accordion with scroll-to-content","report");var d=n.attr("data-tabcordion-scroll");void 0===d&&(d=0),e.collapsible.open(n.find(a),!0,function(){$("html, body").animate({scrollTop:l.offset().top-60-d},300)},!1)}else e.debugging("collapsible: Open accordion without scroll-to-content","report"),e.collapsible.open(n.find(a),!0,null,!1);else e.collapsible.close(t.filter(".is-open"),!1,function(){e.collapsible.open(n.find(a),!1,null,!1)});n.find(".js-collapsible").parents(".js-collapsible-tab").removeClass("is-active"),n.find('.js-collapsible[data-collapsible="'+a+'"], .js-collapsible[href="'+a+'"]').parents(".js-collapsible-tab").addClass("is-active"),n.find(".js-collapsible").attr("aria-selected",!1).attr("aria-expanded",!1),n.find('.js-collapsible[data-collapsible="'+a+'"], .js-collapsible[href="'+a+'"]').attr("aria-selected",!0).attr("aria-expanded",!0)}else{e.debugging("collapsible: Triggering pure toggle","report");var c=l.attr("data-collapsible-mode");"show"===c?e.collapsible.open(a,!0):"hide"===c?e.collapsible.close(a,!0):e.collapsible.toggle(a,!0)}}),$(".tabcordion-tabs .js-collapsible").not(".js-rendered").on("keydown",function(o){e.debugging("collapsible: Keyboard used","interaction");var l,a=$(this),n=a.parents("li").prev().children(".js-collapsible"),i=a.parents("li").next().children(".js-collapsible"),t=a.parents(".tabcordion-tabs").find(".js-collapsible"),s="";switch(o.keyCode){case 37:l=n,s="Left";break;case 39:l=i,s="Right";break;default:l=!1}l.length&&(e.debugging("collapsible: "+s+" arrow key used","interaction"),t.attr("tabindex","-1"),l.attr("tabindex",null).focus().trigger("click"))}),$(".js-collapsible").addClass("js-rendered")},e.tabcordion=o,e.collapsible=l,e.tabcordion.init()}(GUI);