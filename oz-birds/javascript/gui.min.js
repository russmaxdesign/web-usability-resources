/* GUI blend http://gel.westpacgroup.com.au/GUI/WBC/blender/#/_colors:2.0.1/_fonts:2.0.1/_grid:2.0.0/_javascript-helpers:2.0.0/_text-styling:3.0.0/tabcordions:3.0.0 */
"use strict";!function(e,t){function n(e){if(9===e.keyCode){var t=!!e.shiftKey;r(this,e.target,t)&&(e.preventDefault(),e.stopPropagation())}}function r(e,t,n){var r,o,i,a,c=l(e),u=t;do{switch(r=c.index(u),o=r+1,i=r-1,a=c.length-1,r){case-1:return!1;case 0:i=a;break;case a:o=0}n&&(o=i),u=c.get(o);try{u.focus()}catch(e){}}while(t===t.ownerDocument.activeElement);return!0}function o(){return this.tabIndex>0}function i(){return!this.tabIndex}function a(e,t){return e.t-t.t||e.i-t.i}function l(t){var n=e(t),r=[],l=0;return f.enable&&f.enable(),n.find("a[href], link[href], [draggable=true], [contenteditable=true], :input:enabled, [tabindex=0]").filter(":visible").filter(i).each(function(e,t){r.push({v:t,t:0,i:l++})}),n.find("[tabindex]").filter(":visible").filter(o).each(function(e,t){r.push({v:t,t:t.tabIndex,i:l++})}),f.disable&&f.disable(),r=e.map(r.sort(a),function(e){return e.v}),e(r)}function c(){return this.keydown(n),this.data(s,!0),this}function u(){return this.unbind("keydown",n),this.removeData(s),this}function d(){return!!this.data(s)}var s="trap.isTrapping";e.fn.extend({trap:c,untrap:u,isTrapping:d});var f={};e.find.find&&e.find.attr!==e.attr&&function(){function n(e){var n=e.getAttributeNode(i);return n&&n.specified?parseInt(n.value,10):t}function r(){a[i]=a.tabIndex=n}function o(){delete a[i],delete a.tabIndex}var i="tabindex",a=e.expr.attrHandle;f={enable:r,disable:o}}()}(jQuery);var GUI=function(){return{DEBUG:!1,DEBUGfilter:[],init:function(){window.console||(console={log:function(){}}),GUI.DEBUG&&console.log("%cGUI DEBUGGING INFORMATION","font-size: 25px;"),$("html").removeClass("no-js").addClass("js"),$("body").on("keydown",function(e){var t=e.keyCode||e.which;9==t&&(GUI.debugging("GUI: Tab detected","report"),$("html").addClass("is-keyboarduser"),$("body").off("keydown"))})},detectCSS:function(e){GUI.debugging('Core: detectCSS called with "'+e+'"',"report");var t=!1,n=["Webkit","Moz","ms","O"];e=e.toLowerCase();var r=e.charAt(0).toUpperCase()+e.substr(1),o=document.createElement("div");if(void 0!=o.style[e])t=!0;else for(var i=0;i<n.length;i++)void 0!=o.style[n[i]+r]&&(t=!0);return t?$("html").addClass(e):$("html").addClass("no-"+e),t},debounce:function(e,t,n){GUI.debugging("Core: Debounce called","report");var r;return function(){var o=this,i=arguments,a=function(){r=null,n||(GUI.debugging("Core: Debounce executed (1)","report"),e.apply(o,i))},l=n&&!r;clearTimeout(r),r=setTimeout(a,t),l&&(GUI.debugging("Core: Debounce executed (2)","report"),e.apply(o,i))}},throttle:function(e,t){GUI.debugging("Core: Throttle called","report"),t||(t=250);var n,r;return function(){var o=this,i=+new Date,a=arguments;n&&i<n+t?(clearTimeout(r),r=setTimeout(function(){GUI.debugging("Core: Throttle executed (1)","report"),n=i,e.apply(o,a)},t)):(GUI.debugging("Core: Throttle executed (2)","report"),n=i,e.apply(o,a))}},debugging:function(e,t){if(GUI.DEBUGfilter.length>0){for(var n=e.split(": "),r="",o=GUI.DEBUGfilter.length-1;o>=0;o--)n[0]===GUI.DEBUGfilter[o]&&(r=e);e=r}GUI.DEBUG&&e.length>0&&("report"===t?console.log("%c☑ ","color: green; font-size: 18px;",e):"error"===t?console.log("%c☒ ","color: red; font-size: 18px;",e):"interaction"===t?console.log("%c☜ ","color: blue; font-size: 18px;",e):"send"===t?console.log("%c↝ ","color: pink; font-size: 18px;",e):"receive"===t&&console.log("%c↜ ","color: pink; font-size: 18px;",e))}}}();GUI.init();!function(e){var l={},i={};i.toggle=function(l,i,o){if(e.debugging("collapsible: Toggle called","report"),l instanceof jQuery)var t=l;else var t=$(l);jQuery.fn.reverse=[].reverse,t.reverse().each(function(){var l=$(this),t=l.hasClass("is-open");t?e.collapsible.close(l,i,o):e.collapsible.open(l,i,o)})},i.close=function(l,i,o){if(e.debugging('collapsible: Closing element "'+l+'"',"report"),l instanceof jQuery)var t=l;else var t=$(l);if(!t.length)return void e.debugging("collapsible: No element found to close","error");var n=t.height();t.css({height:n}).removeClass("is-open").attr("aria-hidden","true"),i?t.stop(!0).animate({height:0},400,o):(t.css({height:0}),"undefined"!=typeof o&&null!==o&&o())},i.open=function(l,i,o,t){if(e.debugging('collapsible: Opening element "'+l+'"',"report"),void 0===t&&(t=!0),l instanceof jQuery)var n=l;else var n=$(l);if(!n.length)return void e.debugging("collapsible: No element found to open","error");if(i){var a=n.css("height"),s=n.css({height:"auto"}).height();n.css({height:a})}n.addClass("is-open").attr("aria-hidden","false"),t&&n.first().focus(),i?n.stop(!0).animate({height:s},400,function(){n.css({height:""}),"undefined"!=typeof o&&null!==o&&o()}):(n.css({height:""}),"undefined"!=typeof o&&null!==o&&o())},l.init=function(){e.debugging("tabcordion: Initiating","report"),$(".js-collapsible").length&&(e.debugging("tabcordion: Found instance","report"),e.tabcordion.render())},l.render=function(){e.debugging("tabcordion: Rendering","report"),$(".js-collapsible").not(".js-rendered").on("click",function(l){e.debugging("collapsible: Collapsible clicked","interaction"),l.preventDefault();var i=$(this),o=i.attr("href")?i.attr("href"):i.attr("data-collapsible"),t=i.parents(".tabcordion"),n="undefined"!==t.attr("data-tabcordion-scroll")&&"none"!==t.attr("data-tabcordion-scroll");if(t.length){e.debugging("collapsible: Found to be inside tabcordion","report");var a=i.parents(".tabcordion").find(".collapsible-body"),s=1===parseInt($("html").css("line-height")),r=!0;if(s||(r=!1,i.parents(".tabcordion-accordion").length&&(r=!0)),i.parents(".tabcordion-tabs").length&&(r=!1),r)if(e.collapsible.close(a.filter(".is-open"),!0),n){e.debugging("collapsible: Open accordion with scroll-to-content","report");var c=t.attr("data-tabcordion-scroll");void 0===c&&(c=0),e.collapsible.open(t.find(o),!0,function(){$("html, body").animate({scrollTop:i.offset().top-60-c},300)},!1)}else e.debugging("collapsible: Open accordion without scroll-to-content","report"),e.collapsible.open(t.find(o),!0,null,!1);else e.collapsible.close(a.filter(".is-open"),!1,function(){e.collapsible.open(t.find(o),!1,null,!1)});t.find(".js-collapsible").parents(".js-collapsible-tab").removeClass("is-active"),t.find('.js-collapsible[data-collapsible="'+o+'"], .js-collapsible[href="'+o+'"]').parents(".js-collapsible-tab").addClass("is-active"),t.find(".js-collapsible").attr("aria-selected",!1).attr("aria-expanded",!1),t.find('.js-collapsible[data-collapsible="'+o+'"], .js-collapsible[href="'+o+'"]').attr("aria-selected",!0).attr("aria-expanded",!0)}else{e.debugging("collapsible: Triggering pure toggle","report");var d=i.attr("data-collapsible-mode");"show"===d?e.collapsible.open(o,!0):"hide"===d?e.collapsible.close(o,!0):e.collapsible.toggle(o,!0)}}),$(".tabcordion-tabs .js-collapsible").not(".js-rendered").on("keydown",function(l){e.debugging("collapsible: Keyboard used","interaction");var i,o=$(this),t=o.parents("li").prev().children(".js-collapsible"),n=o.parents("li").next().children(".js-collapsible"),a=o.parents(".tabcordion-tabs").find(".js-collapsible"),s="";switch(l.keyCode){case 37:i=t,s="Left";break;case 39:i=n,s="Right";break;default:i=!1}i.length&&(e.debugging("collapsible: "+s+" arrow key used","interaction"),a.attr("tabindex","-1"),i.attr("tabindex",null).focus().trigger("click"))}),$(".js-collapsible").addClass("js-rendered")},e.tabcordion=l,e.collapsible=i,e.tabcordion.init()}(GUI);